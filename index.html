<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Let'sGossip</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <h1>Let'sGossip</h1>
  <p>Choose your chat mode:</p>
  <button id="createBtn">Create Private Room</button>
  <button id="joinBtn">Join Private Room</button>
  <button id="publicBtn">Join Public Room</button>
</div>

<!-- Firebase CDN -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="firebase.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const createBtn = document.getElementById("createBtn");
  const joinBtn = document.getElementById("joinBtn");
  const publicBtn = document.getElementById("publicBtn");

  // CREATE PRIVATE ROOM
  createBtn.addEventListener("click", () => {
    if(!confirm("Create a private chat room?")) return;
    const roomId = 'room_' + Math.random().toString(36).substring(2,8);
    let password = prompt("Set a password (max 7 chars, optional):","");
    if(password && password.length>7){ alert("Password too long!"); return; }
    alert(`Room created! Share link:\nprivate.html?room=${roomId}&pwd=${password}`);
    window.location.href = `private.html?room=${roomId}&pwd=${password}`;
  });

  // JOIN PRIVATE ROOM
  joinBtn.addEventListener("click", () => {
    if(!confirm("Join a private chat room?")) return;
    const roomId = prompt("Enter Room ID:");
    if(!roomId){ alert("Room ID required!"); return; }
    const password = prompt("Enter Room Password (if any):","");
    window.location.href = `private.html?room=${roomId}&pwd=${password}`;
  });

  // JOIN PUBLIC ROOM
  publicBtn.addEventListener("click", () => {
    const roomId = prompt("Enter Public Room ID (or leave blank to join general room):","");
    const finalRoom = roomId ? roomId : "public_general";
    window.location.href = `public.html?room=${finalRoom}`;
  });
});
</script>
</body>
</html>
